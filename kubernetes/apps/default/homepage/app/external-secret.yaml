---
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: homepage-secret
  namespace: default
  labels:
    app.kubernetes.io/name: homepage
spec:
  target:
    deletionPolicy: Delete
    template:
      type: Opaque
      data:
        HOMEPAGE_VAR_PLEX_TOKEN: |-
          {{ .plex_token }}
        HOMEPAGE_VAR_TAUTULLI_TOKEN: |-
          {{ .tautulli_token }}
        HOMEPAGE_VAR_UNIFI_USERNAME: |-
          {{ .unifi_user }}
        HOMEPAGE_VAR_UNIFI_PASSWORD: |-
          {{ .unifi_pass }}
  data:
    - secretKey: plex_token
      sourceRef:
        storeRef:
          name: bitwarden-fields
          kind: ClusterSecretStore
      remoteRef:
        key: 5f4a73e9-dbaa-47bf-a5f2-ac6e00f706e3
        property: token
    - secretKey: tautulli_token
      sourceRef:
        storeRef:
          name: bitwarden-fields
          kind: ClusterSecretStore
      remoteRef:
        key: 9be660f2-f018-41fa-91db-afd500dfc709
        property: docker_token
    - secretKey: unifi_user
      sourceRef:
        storeRef:
          name: bitwarden-login
          kind: ClusterSecretStore
      remoteRef:
        key: 02cfb975-77dc-46fb-96b2-afd60023b1a1
        property: username
    - secretKey: unifi_pass
      sourceRef:
        storeRef:
          name: bitwarden-login
          kind: ClusterSecretStore
      remoteRef:
        key: 02cfb975-77dc-46fb-96b2-afd60023b1a1
        property: password
