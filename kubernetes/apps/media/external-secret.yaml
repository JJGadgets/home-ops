---
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: media-namespace-secrets
  namespace: flux-system
spec:
  target:
    deletionPolicy: Delete
    template:
      type: Opaque
      data:
        OVERSEERR_TOKEN: |-
          {{ .overseerr_token }}
        PLEX_TOKEN: |-
          {{ .plex_token }}
        TAUTULLI_TOKEN: |-
          {{ .tautulli_token }}
  data:
    - secretKey: overseerr_token
      sourceRef:
        storeRef:
          name: bitwarden-fields
          kind: ClusterSecretStore
      remoteRef:
        key: d6c7ed5d-dc6c-4a61-8df5-afd500e1d0ef
        property: token
    - secretKey: plex_token
      sourceRef:
        storeRef:
          name: bitwarden-fields
          kind: ClusterSecretStore
      remoteRef:
        key: 5f4a73e9-dbaa-47bf-a5f2-ac6e00f706e3
        property: token
    - secretKey: tautulli_token
      sourceRef:
        storeRef:
          name: bitwarden-fields
          kind: ClusterSecretStore
      remoteRef:
        key: 9be660f2-f018-41fa-91db-afd500dfc709
        property: k8s_token
